{"version":3,"file":"rosterTools.mjs","sources":["../../utils/replitmail.ts","../../src/mastra/utils/pdfParser.ts","../../src/mastra/utils/bookingParser.ts","../../src/mastra/tools/rosterTools.ts"],"sourcesContent":["import { promisify } from \"node:util\";\nimport { execFile } from \"node:child_process\";\nimport { z } from \"zod\";\n\nexport const zSmtpMessage = z.object({\n  to: z.string().describe(\"Recipient email address\"),\n  subject: z.string().describe(\"Email subject\"),\n  text: z.string().optional().describe(\"Plain text body\"),\n  html: z.string().optional().describe(\"HTML body\"),\n  attachments: z\n    .array(\n      z.object({\n        filename: z.string().describe(\"File name\"),\n        content: z.string().describe(\"Base64 encoded content\"),\n        contentType: z.string().optional().describe(\"MIME type\"),\n        encoding: z\n          .enum([\"base64\", \"7bit\", \"quoted-printable\", \"binary\"])\n          .default(\"base64\"),\n      })\n    )\n    .optional()\n    .describe(\"Email attachments\"),\n});\n\nexport type SmtpMessage = z.infer<typeof zSmtpMessage>;\n\nasync function getAuthToken(): Promise<{ authToken: string; hostname: string }> {\n  const hostname = process.env.REPLIT_CONNECTORS_HOSTNAME;\n  if (!hostname) {\n    throw new Error(\"REPLIT_CONNECTORS_HOSTNAME not set\");\n  }\n  const { stdout } = await promisify(execFile)(\n    \"replit\",\n    [\"identity\", \"create\", \"--audience\", `https://${hostname}`],\n    { encoding: \"utf8\" }\n  );\n\n  const replitToken = stdout.trim();\n  if (!replitToken) {\n    throw new Error(\"Replit Identity Token not found for repl/depl\");\n  }\n\n  return { authToken: `Bearer ${replitToken}`, hostname };\n}\n\nexport async function sendEmail(message: SmtpMessage): Promise<{\n  accepted: string[];\n  rejected: string[];\n  pending?: string[];\n  messageId: string;\n  response: string;\n}> {\n  const { hostname, authToken } = await getAuthToken();\n\n  const response = await fetch(`https://${hostname}/api/v2/mailer/send`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      \"Replit-Authentication\": authToken,\n    },\n    body: JSON.stringify({\n      to: message.to,\n      subject: message.subject,\n      text: message.text,\n      html: message.html,\n      attachments: message.attachments,\n    }),\n  });\n\n  if (!response.ok) {\n    const error = await response.json();\n    throw new Error(error.message || \"Failed to send email\");\n  }\n\n  return await response.json();\n}\n","import { PDFParse } from \"pdf-parse\";\nimport * as fs from \"fs\";\n\nexport async function extractTextFromPdf(pdfPath: string): Promise<{\n  text: string;\n  numpages: number;\n}> {\n  try {\n    const buffer = fs.readFileSync(pdfPath);\n    const parser = new PDFParse({ data: buffer });\n    const result = await parser.getText();\n    const info = await parser.getInfo({ parsePageInfo: true });\n    await parser.destroy();\n    \n    return {\n      text: result.text,\n      numpages: info.total,\n    };\n  } catch (error) {\n    throw new Error(\n      `Failed to parse PDF: ${error instanceof Error ? error.message : String(error)}`\n    );\n  }\n}\n","export interface BookingEntry {\n  bookingNumber: string;\n  name: string;\n  bookDate: string;\n  releaseDate: string;\n  charges: string[];\n  rawText: string;\n}\n\nexport interface RosterDiff {\n  added: BookingEntry[];\n  removed: BookingEntry[];\n}\n\nexport function parseRosterToBookings(text: string): Map<string, BookingEntry> {\n  const bookings = new Map<string, BookingEntry>();\n  \n  const bookingBlocks = text.split(/(?=Booking #:)/);\n  \n  for (const block of bookingBlocks) {\n    if (!block.includes('Booking #:')) continue;\n    \n    const bookingMatch = block.match(/Booking #:\\s*(\\S+)/);\n    if (!bookingMatch) continue;\n    \n    const bookingNumber = bookingMatch[1];\n    \n    const nameMatch = block.match(/Name:\\s*([A-Z][A-Z\\s,'-]+?)(?=\\s*Name Number:|$)/i);\n    let name = nameMatch ? nameMatch[1].trim() : 'Unknown';\n    \n    name = name.replace(/\\s+/g, ' ').trim();\n    if (name.endsWith(',')) {\n      const nextLineMatch = block.match(/Name:\\s*[^\\n]+\\n([A-Z][A-Z\\s'-]*)/i);\n      if (nextLineMatch) {\n        name = name + ' ' + nextLineMatch[1].trim();\n      }\n    }\n    \n    const bookDateMatch = block.match(/Book Date:\\s*(\\d{1,2}:\\d{2}:\\d{2})\\s+(\\d{1,2}\\/\\d{1,2}\\/\\d{2,4})/);\n    let bookDate = 'Unknown';\n    if (bookDateMatch) {\n      bookDate = bookDateMatch[2] + ' ' + bookDateMatch[1];\n    }\n    \n    const relDateMatch = block.match(/Rel Date:\\s*(No Rel Date|(\\d{1,2}:\\d{2}:\\d{2})\\s+(\\d{1,2}\\/\\d{1,2}\\/\\d{2,4}))/);\n    let releaseDate = 'Not Released';\n    if (relDateMatch) {\n      if (relDateMatch[1] === 'No Rel Date') {\n        releaseDate = 'Not Released';\n      } else if (relDateMatch[2] && relDateMatch[3]) {\n        releaseDate = relDateMatch[3] + ' ' + relDateMatch[2];\n      }\n    }\n    \n    const charges: string[] = [];\n    const lines = block.split('\\n');\n    let inChargeSection = false;\n    \n    for (const line of lines) {\n      const trimmed = line.trim();\n      \n      if (trimmed.includes('Statute') && trimmed.includes('Offense')) {\n        inChargeSection = true;\n        continue;\n      }\n      \n      if (inChargeSection && trimmed) {\n        if (trimmed.match(/^Booking #:/) || \n            trimmed.match(/^--\\s*\\d+\\s*of\\s*\\d+\\s*--/) ||\n            trimmed.match(/^Page\\s+\\d+/i) ||\n            trimmed.match(/^Current Inmate/i) ||\n            trimmed.match(/^rpjlciol/)) {\n          break;\n        }\n        \n        if (trimmed.match(/^\\d+[A-Z.]+/) || trimmed.match(/^[A-Z]+\\.\\d+/)) {\n          const offenseMatch = trimmed.match(/^\\S+\\s+(.+?)\\s+(DIST|SUPR|MUNI)/);\n          if (offenseMatch) {\n            charges.push(offenseMatch[1].trim());\n          }\n        }\n      }\n    }\n    \n    const uniqueCharges = [...new Set(charges)];\n    \n    bookings.set(bookingNumber, {\n      bookingNumber,\n      name,\n      bookDate,\n      releaseDate,\n      charges: uniqueCharges,\n      rawText: block.substring(0, 500),\n    });\n  }\n  \n  return bookings;\n}\n\nexport function compareRosters(previousText: string, currentText: string): RosterDiff {\n  const previousBookings = parseRosterToBookings(previousText);\n  const currentBookings = parseRosterToBookings(currentText);\n  \n  const added: BookingEntry[] = [];\n  const removed: BookingEntry[] = [];\n  \n  for (const [bookingNum, entry] of currentBookings) {\n    if (!previousBookings.has(bookingNum)) {\n      added.push(entry);\n    }\n  }\n  \n  for (const [bookingNum, entry] of previousBookings) {\n    if (!currentBookings.has(bookingNum)) {\n      removed.push(entry);\n    }\n  }\n  \n  return { added, removed };\n}\n\nexport function formatBookingForDisplay(entry: BookingEntry): string {\n  const chargesList = entry.charges.join(', ') || 'No charges listed';\n  return `${entry.name} | Booked: ${entry.bookDate} | Release: ${entry.releaseDate} | Charges: ${chargesList}`;\n}\n\nexport function formatReleaseForDisplay(entry: BookingEntry): string {\n  const chargesList = entry.charges.join(', ') || 'No charges listed';\n  return `${entry.name} | Released: ${entry.releaseDate !== 'Not Released' ? entry.releaseDate : 'Unknown'} | Charges: ${chargesList}`;\n}\n\nexport function formatDiffForEmail(diff: RosterDiff): { addedText: string; removedText: string } {\n  const addedText = diff.added.map(entry => formatBookingForDisplay(entry)).join('\\n');\n  const removedText = diff.removed.map(entry => formatReleaseForDisplay(entry)).join('\\n');\n  return { addedText, removedText };\n}\n","import { createTool } from \"@mastra/core/tools\";\nimport { z } from \"zod\";\nimport * as fs from \"fs\";\nimport * as crypto from \"crypto\";\nimport * as path from \"path\";\nimport { sendEmail } from \"../../../utils/replitmail\";\nimport { extractTextFromPdf } from \"../utils/pdfParser\";\nimport { parseRosterToBookings, compareRosters, formatBookingForDisplay, type BookingEntry } from \"../utils/bookingParser\";\n\nconst PDF_URL = \"https://hub.masoncountywa.gov/sheriff/reports/incustdy.pdf\";\nconst STORAGE_DIR = \".data\";\nconst PREV_HASH_FILE = `${STORAGE_DIR}/prev_hash.txt`;\nconst PREV_ROSTER_FILE = `${STORAGE_DIR}/prev_roster.txt`;\nconst CHANGE_LOG_FILE = `${STORAGE_DIR}/change_log.txt`;\n\nfunction ensureStorageDir() {\n  if (!fs.existsSync(STORAGE_DIR)) {\n    fs.mkdirSync(STORAGE_DIR, { recursive: true });\n  }\n}\n\nexport const downloadPdfTool = createTool({\n  id: \"download-pdf\",\n  description: \"Downloads the Mason County Jail Roster PDF from the official source\",\n  inputSchema: z.object({}),\n  outputSchema: z.object({\n    success: z.boolean(),\n    pdfBuffer: z.string().describe(\"Base64 encoded PDF content\"),\n    error: z.string().optional(),\n  }),\n  execute: async (ctx) => {\n    const logger = ctx.mastra?.getLogger();\n    logger?.info(\"Downloading PDF from Mason County...\");\n\n    try {\n      const response = await fetch(PDF_URL);\n      if (!response.ok) {\n        throw new Error(`Failed to download PDF: ${response.status} ${response.statusText}`);\n      }\n\n      const arrayBuffer = await response.arrayBuffer();\n      const buffer = Buffer.from(arrayBuffer);\n      const base64Content = buffer.toString(\"base64\");\n\n      logger?.info(\"PDF downloaded successfully\", {\n        size: buffer.length,\n      });\n\n      return {\n        success: true,\n        pdfBuffer: base64Content,\n      };\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : String(error);\n      logger?.error(\"Failed to download PDF\", { error: errorMessage });\n      return {\n        success: false,\n        pdfBuffer: \"\",\n        error: errorMessage,\n      };\n    }\n  },\n});\n\nexport const extractPdfTextTool = createTool({\n  id: \"extract-pdf-text\",\n  description: \"Extracts all text content from a PDF buffer\",\n  inputSchema: z.object({\n    pdfBuffer: z.string().describe(\"Base64 encoded PDF content\"),\n  }),\n  outputSchema: z.object({\n    success: z.boolean(),\n    text: z.string(),\n    error: z.string().optional(),\n  }),\n  execute: async (ctx) => {\n    const logger = ctx.mastra?.getLogger();\n    logger?.info(\"Extracting text from PDF...\");\n\n    try {\n      const buffer = Buffer.from(ctx.context.pdfBuffer, \"base64\");\n      \n      ensureStorageDir();\n      const tempPdfPath = path.join(STORAGE_DIR, `temp_${Date.now()}.pdf`);\n      fs.writeFileSync(tempPdfPath, buffer);\n      logger?.info(\"Saved temp PDF file\", { path: tempPdfPath });\n\n      const parsed = await extractTextFromPdf(tempPdfPath);\n\n      fs.unlinkSync(tempPdfPath);\n      logger?.info(\"Cleaned up temp PDF file\");\n\n      const text = parsed.text;\n\n      logger?.info(\"Text extracted successfully\", {\n        characterCount: text.length,\n        pageCount: parsed.numpages,\n      });\n\n      return {\n        success: true,\n        text,\n      };\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : String(error);\n      logger?.error(\"Failed to extract text\", { error: errorMessage });\n      return {\n        success: false,\n        text: \"\",\n        error: errorMessage,\n      };\n    }\n  },\n});\n\nexport const compareRosterTool = createTool({\n  id: \"compare-roster\",\n  description: \"Compares the current roster text with the previous version to detect changes at the inmate/booking level\",\n  inputSchema: z.object({\n    currentText: z.string().describe(\"Current roster text content\"),\n  }),\n  outputSchema: z.object({\n    hasChanged: z.boolean(),\n    isFirstRun: z.boolean(),\n    currentHash: z.string(),\n    previousHash: z.string().optional(),\n    addedBookings: z.array(z.string()),\n    removedBookings: z.array(z.string()),\n    addedLines: z.array(z.string()),\n    removedLines: z.array(z.string()),\n    timestamp: z.string(),\n  }),\n  execute: async (ctx) => {\n    const logger = ctx.mastra?.getLogger();\n    logger?.info(\"Comparing roster with previous version (booking-level)...\");\n\n    ensureStorageDir();\n    const timestamp = new Date().toISOString();\n    const currentHash = crypto.createHash(\"md5\").update(ctx.context.currentText).digest(\"hex\");\n\n    let previousHash: string | undefined;\n    let previousText: string | undefined;\n\n    try {\n      previousHash = fs.existsSync(PREV_HASH_FILE)\n        ? fs.readFileSync(PREV_HASH_FILE, \"utf-8\").trim()\n        : undefined;\n      previousText = fs.existsSync(PREV_ROSTER_FILE)\n        ? fs.readFileSync(PREV_ROSTER_FILE, \"utf-8\")\n        : undefined;\n    } catch (error) {\n      logger?.warn(\"Could not read previous files\", { error });\n    }\n\n    if (!previousHash || !previousText) {\n      logger?.info(\"First run - no previous data found\");\n      return {\n        hasChanged: false,\n        isFirstRun: true,\n        currentHash,\n        previousHash: undefined,\n        addedBookings: [],\n        removedBookings: [],\n        addedLines: [],\n        removedLines: [],\n        timestamp,\n      };\n    }\n\n    const hasChanged = currentHash !== previousHash;\n\n    if (!hasChanged) {\n      logger?.info(\"No changes detected\");\n      return {\n        hasChanged: false,\n        isFirstRun: false,\n        currentHash,\n        previousHash,\n        addedBookings: [],\n        removedBookings: [],\n        addedLines: [],\n        removedLines: [],\n        timestamp,\n      };\n    }\n\n    const diff = compareRosters(previousText, ctx.context.currentText);\n    \n    const addedBookings = diff.added.map(entry => formatBookingForDisplay(entry));\n    const removedBookings = diff.removed.map(entry => formatBookingForDisplay(entry));\n\n    logger?.info(\"Changes detected at booking level\", {\n      newBookings: addedBookings.length,\n      releasedBookings: removedBookings.length,\n    });\n\n    return {\n      hasChanged: addedBookings.length > 0 || removedBookings.length > 0,\n      isFirstRun: false,\n      currentHash,\n      previousHash,\n      addedBookings,\n      removedBookings,\n      addedLines: addedBookings,\n      removedLines: removedBookings,\n      timestamp,\n    };\n  },\n});\n\nexport const saveRosterHistoryTool = createTool({\n  id: \"save-roster-history\",\n  description: \"Saves the current roster state and logs changes to the history file\",\n  inputSchema: z.object({\n    currentText: z.string(),\n    currentHash: z.string(),\n    timestamp: z.string(),\n    hasChanged: z.boolean(),\n    addedLines: z.array(z.string()),\n    removedLines: z.array(z.string()),\n  }),\n  outputSchema: z.object({\n    success: z.boolean(),\n    message: z.string(),\n  }),\n  execute: async (ctx) => {\n    const logger = ctx.mastra?.getLogger();\n    logger?.info(\"Saving roster state...\");\n\n    ensureStorageDir();\n\n    try {\n      fs.writeFileSync(PREV_HASH_FILE, ctx.context.currentHash);\n      fs.writeFileSync(PREV_ROSTER_FILE, ctx.context.currentText);\n\n      if (ctx.context.hasChanged) {\n        const logEntry = `\n================================================================================\nChange detected at: ${ctx.context.timestamp}\n================================================================================\nNew Bookings (${ctx.context.addedLines.length}):\n${ctx.context.addedLines.map((line: string) => `  + ${line}`).join(\"\\n\") || \"  (none)\"}\n\nReleased (${ctx.context.removedLines.length}):\n${ctx.context.removedLines.map((line: string) => `  - ${line}`).join(\"\\n\") || \"  (none)\"}\n`;\n        fs.appendFileSync(CHANGE_LOG_FILE, logEntry);\n        logger?.info(\"Change logged to history file\");\n      }\n\n      logger?.info(\"Roster state saved successfully\");\n      return {\n        success: true,\n        message: ctx.context.hasChanged ? \"Changes saved and logged\" : \"State updated (no changes)\",\n      };\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : String(error);\n      logger?.error(\"Failed to save state\", { error: errorMessage });\n      return {\n        success: false,\n        message: `Failed to save: ${errorMessage}`,\n      };\n    }\n  },\n});\n\nexport const sendNotificationEmailTool = createTool({\n  id: \"send-notification-email\",\n  description: \"Sends an email notification when roster changes are detected\",\n  inputSchema: z.object({\n    timestamp: z.string(),\n    addedLines: z.array(z.string()),\n    removedLines: z.array(z.string()),\n    summary: z.string().describe(\"AI-generated summary of the changes\"),\n  }),\n  outputSchema: z.object({\n    success: z.boolean(),\n    message: z.string(),\n  }),\n  execute: async (ctx) => {\n    const logger = ctx.mastra?.getLogger();\n    logger?.info(\"Preparing notification email...\");\n\n    try {\n      const addedSection =\n        ctx.context.addedLines.length > 0\n          ? `<h3 style=\"color: #dc3545; font-family: Arial, sans-serif; font-size: 10pt;\">BOOKED (${ctx.context.addedLines.length}):</h3>\n             <ul style=\"font-family: Arial, sans-serif; font-size: 8pt;\">${ctx.context.addedLines.slice(0, 50).map((line: string) => `<li>${line}</li>`).join(\"\")}\n             ${ctx.context.addedLines.length > 50 ? `<li>...and ${ctx.context.addedLines.length - 50} more</li>` : \"\"}</ul>`\n          : \"\";\n\n      const removedSection =\n        ctx.context.removedLines.length > 0\n          ? `<h3 style=\"color: #28a745; font-family: Arial, sans-serif; font-size: 10pt;\">RELEASED (${ctx.context.removedLines.length}):</h3>\n             <ul style=\"font-family: Arial, sans-serif; font-size: 8pt;\">${ctx.context.removedLines.slice(0, 50).map((line: string) => `<li>${line}</li>`).join(\"\")}\n             ${ctx.context.removedLines.length > 50 ? `<li>...and ${ctx.context.removedLines.length - 50} more</li>` : \"\"}</ul>`\n          : \"\";\n\n      const htmlContent = `\n        <html>\n        <body style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;\">\n          <h1 style=\"color: #333;\">Mason County Jail Roster Update</h1>\n          <p><strong>Time:</strong> ${ctx.context.timestamp}</p>\n          <hr style=\"border: 1px solid #ddd;\">\n          <h2>Summary</h2>\n          <p>${ctx.context.summary}</p>\n          <hr style=\"border: 1px solid #ddd;\">\n          ${addedSection}\n          ${removedSection}\n          <hr style=\"border: 1px solid #ddd;\">\n          <p style=\"color: #666; font-size: 12px;\">\n            This is an automated notification from the Mason County Jail Roster Monitor.\n            <br>View the full roster: <a href=\"https://hub.masoncountywa.gov/sheriff/reports/incustdy.pdf\">https://hub.masoncountywa.gov/sheriff/reports/incustdy.pdf</a>\n          </p>\n        </body>\n        </html>\n      `;\n\n      const textContent = `\nMason County Jail Roster Update\n================================\nTime: ${ctx.context.timestamp}\n\nSummary:\n${ctx.context.summary}\n\nBOOKED (${ctx.context.addedLines.length}):\n${ctx.context.addedLines.slice(0, 30).map((line: string) => `+ ${line}`).join(\"\\n\")}\n${ctx.context.addedLines.length > 30 ? `...and ${ctx.context.addedLines.length - 30} more` : \"\"}\n\nRELEASED (${ctx.context.removedLines.length}):\n${ctx.context.removedLines.slice(0, 30).map((line: string) => `- ${line}`).join(\"\\n\")}\n${ctx.context.removedLines.length > 30 ? `...and ${ctx.context.removedLines.length - 30} more` : \"\"}\n\nView full roster: https://hub.masoncountywa.gov/sheriff/reports/incustdy.pdf\n      `;\n\n      const result = await sendEmail({\n        to: process.env.NOTIFICATION_EMAIL || \"admin@example.com\",\n        subject: `Mason County Jail Roster Updated - ${new Date(ctx.context.timestamp).toLocaleDateString()}`,\n        html: htmlContent,\n        text: textContent,\n      });\n\n      logger?.info(\"Email sent successfully\", {\n        messageId: result.messageId,\n        accepted: result.accepted,\n      });\n\n      return {\n        success: true,\n        message: `Email sent successfully (ID: ${result.messageId})`,\n      };\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : String(error);\n      logger?.error(\"Failed to send email\", { error: errorMessage });\n      return {\n        success: false,\n        message: `Failed to send email: ${errorMessage}`,\n      };\n    }\n  },\n});\n"],"names":[],"mappings":"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"}